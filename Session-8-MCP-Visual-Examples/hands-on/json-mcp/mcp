#!/bin/bash
# Simple MCP Command
# Usage: ./mcp "Your question here"

QUESTION="$1"

if [ -z "$QUESTION" ]; then
    echo "Usage: ./mcp \"Your question here\""
    exit 1
fi

echo "ðŸ¤– MCP Processing: '$QUESTION'"
echo ""

# MCP Smart Routing Logic
if echo "$QUESTION" | grep -qi "plan\|trip\|travel\|visit\|vacation"; then
    MODEL="phi-fast:latest"
    REASON="Travel question detected"
elif echo "$QUESTION" | grep -qi "code\|function\|programming\|debug"; then
    MODEL="deepseek-coder-fast:latest"
    REASON="Programming question detected"
else
    MODEL="mistral:latest"
    REASON="General question detected"
fi

echo "ðŸ§  MCP Analysis:"
echo "   âœ“ $REASON"
echo "   âœ“ Auto-selected model: $MODEL"
echo ""

echo "ðŸš€ MCP Response:"
curl -s -X POST http://localhost:11434/api/generate \
  -H "Content-Type: application/json" \
  -d "{\"model\": \"$MODEL\", \"prompt\": \"$QUESTION\", \"stream\": false}" \
  | python3 -c "
import sys, json
try:
    data = json.load(sys.stdin)
    response = data.get('response', 'No response')
    print(response)
except:
    print('Error processing response')
"
